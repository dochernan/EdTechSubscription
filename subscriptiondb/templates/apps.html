{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EdTech Subscription Apps</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" rel="stylesheet">

    <style>
        body {
            background-color: white;
        }

        .navbar, .footer, .text-muted {
            background-color: darkslategrey;
            color: khaki !important;
        }

        .navbar-brand, .navbar-brand:hover {
            color: whitesmoke;
        }

        .nav-link {
            color: whitesmoke;
        }

        .nav-link:hover {
            color: khaki;
        }

        .nav-link.active {
            color: khaki !important;
            font-weight: bold;
        }

        .navbar-subtext {
            font-size: 0.9rem;
            color: khaki;
            font-style: italic;
            margin-left: 1rem;
        }

        .banner-img {
            width: 100%;
            height: 100%;
            max-height: 500px;
            object-fit: fill;
            display: block;
        }

        .banner2-img {
            width: 100%;
            height: 100%;
            max-height: 650px;
            object-fit: fill;
            display: block;
        }

        .content-section {
            padding: 3rem 0;
        }

        .main-logo {
            max-width: 100%;
            border-radius: 1rem;
        }

        .btn-submit {
            background-color: darkslategrey;
            color: khaki;
        }

        .btn-submit:hover {
            background-color: #355e5e;
        }


        .card-title {
            color: darkslategrey;
            font-weight: bold;
        }

        .card-text {
            font-size: 0.95rem;
            color: #555;
        }

        .hero-banner {
            position: relative;
            width: 100%;
        }

        .hero-text {
            position: absolute;
            top: 30px;
            left: 40px;
            font-family: Montserrat;

            padding: 1.5rem 2rem;


            max-width: 450px;

        }

                .hero-text2 {
            position: absolute;
            top: 30px;
            left: 40px;
            font-family: Montserrat;

            padding: 1.5rem 2rem;


            max-width: 650px;

        }

        .hero-text h1 {
            font-size: 3.8rem;
            margin-bottom: 0.5rem;
            font-weight: 600;
        }

        .hero-text p {
            font-size: 1rem;
            margin-bottom: 0;
            color: #555;
        }

        .content-section {
            padding: 2rem 0;
        }

        @media (max-width: 576px) {
            .content-section {
                text-align: center;
                flex-direction: column;
            }
        }

        /* ðŸ”½ Responsive font resizing for smaller screens */
        @media (max-width: 768px) {
            .hero-text {
                top: 20px;
                left: 20px;
                padding: 1rem 1.25rem;
                max-width: 100%;
            }

            .hero-text h1 {
                font-size: 1.4rem;
            }

            .hero-text p {
                font-size: 0.9rem;
            }
        }

        @media (max-width: 480px) {
            .hero-text h1 {
                font-size: 1.2rem;
            }

            .hero-text p {
                font-size: 0.85rem;
            }
        }

        /* Floating Chat Icon */
        .chatbot-button {
            position: fixed;
            bottom: 30px;
            right: 30px;
            background-color: darkslategrey;
            color: white;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.8rem;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
            cursor: pointer;
            z-index: 999;
        }

        /* Chat Popup */
        .chatbot-popup {
            position: fixed;
            bottom: 100px;
            right: 30px;
            width: 360px;
            height: 500px;
            background-color: white;
            border-radius: 10px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.2);
            overflow: hidden;
            z-index: 999;
            display: none;
        }

        .chatbot-popup iframe {
            width: 100%;
            height: 100%;
            border: none;
        }

        @media (max-width: 576px) {
            .carousel-item h5 {
                font-size: 1rem;
            }

            .carousel-item p {
                font-size: 0.85rem;
            }
        }

        .bi-envelope-fill {
    font-size: 1.1rem;
}

a.text-dark:hover .bi-envelope-fill {
    color: darkslategrey;
}


    </style>
</head>
<body>
<!-- Navigation Bar -->
<nav class="navbar navbar-expand-lg navbar-light">
    <div class="container-fluid">
        <a class="navbar-brand" href="#">EdTech @ ISM</a>

        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse justify-content-end" id="navbarNav">
            <ul class="navbar-nav">

                <!-- Always visible -->
                <li class="nav-item"><a class="nav-link" href="{% url 'home' %}">Home</a></li>
                <li class="nav-item"><a class="nav-link" href="{% url 'faq' %}">FAQ</a></li>
                <li class="nav-item"><a class="nav-link" href="{% url 'aiguidelines' %}">AI Guidelines</a></li>

                {% if user.is_authenticated %}
                    <!-- Visible to all authenticated users -->
                    <li class="nav-item"><a class="nav-link active" href="{% url 'apps' %}">Apps</a></li>

                    {% if request.session.user_level == "Basic" %}
                        <li class="nav-item"><a class="nav-link" href="{% url 'contact_us' %}">Requests</a></li>
                    {% elif request.session.user_level == "Administrator" %}
                        <li class="nav-item"><a class="nav-link" href="{% url 'request' %}">New Requests</a></li>
                        <li class="nav-item"><a class="nav-link" href="{% url 'users' %}">Users</a></li>
                        <li class="nav-item"><a class="nav-link" href="{% url 'subscriptions' %}">Subscription</a></li>
                    {% endif %}
                {% endif %}
            </ul>

        </div>
    </div>
</nav>

{% block content %}
<div class="container content-section">
    <h2 class="text-center mb-4" style="color: darkslategrey;">School-Approved Apps</h2>

    <div class="row g-4 justify-content-center">
        {% for app in apps %}
        <div class="col-12 col-sm-6 col-md-4 col-lg-3">
            <div class="card h-100 shadow-sm">
                <img src="{{ app.logo_url }}" class="card-img-top" alt="{{ app.name }}" style="height: 160px; object-fit: contain; padding: 1rem;">
                <div class="card-body d-flex flex-column">
                    <h5 class="card-title">{{ app.name }}</h5>

                    <!-- Division Badges -->
                    {% if app.division %}
                        <p class="card-text mb-1"><strong>Division:</strong></p>
                        <div class="mb-2">
                            {% for tag in app.division %}
                                {% if tag == "ES" %}
                                    <span class="badge bg-success me-1">{{ tag }}</span>
                                {% elif tag == "MS" %}
                                    <span class="badge bg-primary me-1">{{ tag }}</span>
                                {% elif tag == "HS" %}
                                    <span class="badge bg-danger me-1">{{ tag }}</span>
                                {% else %}
                                    <span class="badge bg-secondary me-1">{{ tag }}</span>
                                {% endif %}
                            {% endfor %}
                        </div>
                    {% endif %}

                    <!-- Subject Tags Badges -->
                    {% if app.subject_tags %}
                        <p class="card-text mb-1"><strong>Subject Tags:</strong></p>
                        <div class="mb-2">
                            {% for tag in app.subject_tags %}
                                <span class="badge bg-info text-dark me-1">{{ tag }}</span>
                            {% endfor %}
                        </div>
                    {% endif %}

                    <a href="{{ app.link }}" target="_blank" class="mt-auto btn btn-submit btn-sm">Open App</a>
                </div>
            </div>
        </div>
        {% endfor %}
    </div>
</div>
{% endblock %}




{% comment %}<!-- User Greeting/Login -->
<div class="container-fluid text-center content-section">
    {% if user.is_authenticated %}
        <p class="lead">Hello, {{ user.first_name|default:user.username }}!</p>
        <a href="{% url 'logout' %}" class="btn btn-outline-danger btn-lg">Logout</a>
    {% else %}
        <a href="{% url 'social:begin' 'google-oauth2' %}" class="btn btn-submit">Sign in with Google</a>
    {% endif %}
</div>{% endcomment %}

{% comment %}<!-- Main Content Section -->
<div class="container-fluid content-section">
    <div class="row align-items-center">
        <div class="col-md-6 text-center">
            <img src="{% static 'images/smartphone.jpg' %}" alt="EdTech Logo" class="main-logo">
        </div>
        <div class="col-md-6">
            <h2>Empowering Education Through Technology</h2>
            <p>
                International School Manila is committed to delivering the highest quality education in line with
                current best practices in the integration of technology. We believe that students thrive in an
                environment in which education with technology is a seamless part of their lives. <br><br>
                Our goal is to provide students with the understanding, tools, and skill sets needed to use technology
                in ways appropriate to their education and learning as deemed by the school. <br><br>
                The BYOD program has helped students take ownership and responsibility for their learning both in and
                outside of the classroom.
            </p>


        </div>
    </div>
</div>{% endcomment %}

<!-- Footer -->
<footer class="footer text-center mt-5 py-3">
    <div class="container">
        <span class="text-muted">&copy; 2025 EdTech @ ISM. All rights reserved.</span>
    </div>
</footer>

<!-- Floating Chatbot -->
<div id="chatbot-toggle" class="chatbot-button">
    <i class="bi bi-chat-dots-fill"></i>
</div>

<div id="chatbot-container" class="chatbot-popup">
    <!-- Replace src with your botâ€™s embed URL or integration -->
    <iframe src="https://chatgpt.com/g/g-bIrlf4t6Q-codi" frameborder="0"></iframe>
</div>


<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

<script>
    document.getElementById('chatbot-toggle').addEventListener('click', function () {
        const chat = document.getElementById('chatbot-container');
        chat.style.display = (chat.style.display === 'none' || chat.style.display === '') ? 'block' : 'none';
    });
</script>

</body>
</html>
